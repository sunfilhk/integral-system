(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-incustomer-incustomer"],{3816:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".incustomer[data-v-006b9ad2]{padding:20px 20px 20px 26px}.incustomer uni-button[data-v-006b9ad2]{height:40px;font-size:16px}.sexs[data-v-006b9ad2]{height:36px;line-height:36px;border:1px solid #e5e5e5;border-radius:6px;padding-left:10px}.xh[data-v-006b9ad2]{position:absolute;top:8px;left:-10px;color:red;font-size:18px}",""]),t.exports=e},"40c4":function(t,e,a){"use strict";a.r(e);var n=a("746b"),i=a.n(n);for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},"63c0":function(t,e,a){"use strict";a.r(e);var n=a("cbef"),i=a("40c4");for(var r in i)["default"].indexOf(r)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("8d47");var o=a("f0c5"),s=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"006b9ad2",null,!1,n["a"],void 0);e["default"]=s.exports},"746b":function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("99af"),a("c975"),a("acd8"),a("ac1f"),a("5319");var n=a("c07f");function i(t){var e=new Date,a=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();return"start"===t?a-=10:"end"===t&&(a+=10),n=n>9?n:"0"+n,i=i>9?i:"0"+i,"".concat(a,"-").concat(n,"-").concat(i)}var r={data:function(){return{show1:!1,date:i({format:!0}),time:"12:01",formData:{name:void 0,sex:void 0,phone:void 0,identity:void 0,bank:void 0,banknum:void 0,amount:void 0,profit:void 0,remark:void 0},array:["男","女"],index:0,rules:{name:{rules:[{required:!0,trigger:"bind",errorMessage:"请输入客户姓名"}]},phone:{rules:[{required:!0,errorMessage:"请输入手机号"},{pattern:/^1[3|4|5|7|8|9][0-9]\d{8}$/,errorMessage:"请输入正确的手机号码"}]},identity:{rules:[]},bank:{rules:[{required:!0,errorMessage:"请输入银行卡"},{minLength:10,errorMessage:"请输入正确的银行卡号"}]},banknum:{rules:[{required:!0,errorMessage:"请输入开户行"}]},amount:{rules:[{required:!0,errorMessage:"请输入金额"},{pattern:/^[0-9]*[1-9][0-9]*$/,errorMessage:"金额为数字且不能为小数"}]}}}},onLoad:function(t){void 0!=t.id?(this.auto(t.id),this.show1=!1):(this.formData.sex=this.array[this.index],this.getConfigKey(),this.show1=!0)},methods:{auto:function(t){var e=this;(0,n.getCustomerByid)({customerid:t}).then((function(t){e.formData=t.data,e.index=e.array.indexOf(t.data.sex)}))},getConfigKey:function(){var t=this;(0,n.getConfigKey)({configKey:"customerratio"}).then((function(e){t.formData.profit=100*parseFloat(e.data.profit).toFixed(5)+"%"}))},bindDateChange:function(t){this.date=t.target.value},bindTimeChange:function(t){this.time=t.target.value},submit:function(){var t=this;this.$refs.form.validate().then((function(e){t.formData.amount>=1e9?uni.showToast({icon:"none",title:"金额不能超过十亿"}):(t.formData.profit=.01*parseFloat(t.formData.profit.replace("%","")),t.formData.date=t.date+" "+t.time+":00",void 0!==t.formData.id?(0,n.customerEdit)(t.formData).then((function(t){uni.switchTab({url:"/pages/customer/customer"})})):(0,n.customerAdd)(t.formData).then((function(t){uni.switchTab({url:"/pages/customer/customer"})})))}))},bindSex:function(t){this.index=t.target.value,this.formData.sex=this.array[this.index]}}};e.default=r},"85cc":function(t,e,a){var n=a("3816");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("08d6dbc2",n,!0,{sourceMap:!1,shadowMode:!1})},"8d47":function(t,e,a){"use strict";var n=a("85cc"),i=a.n(n);i.a},cbef:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var n={uniForms:a("ddd2").default,uniFormsItem:a("7a6d").default,uniEasyinput:a("3344").default},i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"incustomer"},[a("uni-forms",{ref:"form",attrs:{modelValue:t.formData,rules:t.rules}},[a("uni-forms-item",{attrs:{label:"客户姓名",name:"name"}},[a("uni-easyinput",{attrs:{type:"text",placeholder:"请输入客户姓名"},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}}),a("v-uni-text",{staticClass:"xh"},[t._v("*")])],1),a("uni-forms-item",{attrs:{label:"客户性别",name:"sex"}},[a("v-uni-picker",{staticClass:"sexs",attrs:{value:t.index,range:t.array},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindSex.apply(void 0,arguments)}}},[a("v-uni-view",[t._v(t._s(t.array[t.index]))])],1),a("v-uni-text",{staticClass:"xh"},[t._v("*")])],1),a("uni-forms-item",{attrs:{label:"手机号",name:"phone"}},[a("uni-easyinput",{attrs:{type:"text",maxlength:"11",placeholder:"请输入手机号"},model:{value:t.formData.phone,callback:function(e){t.$set(t.formData,"phone",e)},expression:"formData.phone"}}),a("v-uni-text",{staticClass:"xh"},[t._v("*")])],1),a("uni-forms-item",{attrs:{label:"身份证",name:"identity"}},[a("uni-easyinput",{attrs:{type:"text",maxlength:"18",placeholder:"请输入身份证"},model:{value:t.formData.identity,callback:function(e){t.$set(t.formData,"identity",e)},expression:"formData.identity"}})],1),a("uni-forms-item",{attrs:{label:"银行卡",name:"bank"}},[a("uni-easyinput",{attrs:{type:"text",minlength:"10",placeholder:"请输入银行卡"},model:{value:t.formData.bank,callback:function(e){t.$set(t.formData,"bank",e)},expression:"formData.bank"}}),a("v-uni-text",{staticClass:"xh"},[t._v("*")])],1),a("uni-forms-item",{attrs:{label:"开户行",name:"banknum"}},[a("uni-easyinput",{attrs:{type:"text",placeholder:"请输入开户行"},model:{value:t.formData.banknum,callback:function(e){t.$set(t.formData,"banknum",e)},expression:"formData.banknum"}}),a("v-uni-text",{staticClass:"xh"},[t._v("*")])],1),t.show1?a("uni-forms-item",{attrs:{label:"金额",name:"amount"}},[a("uni-easyinput",{attrs:{type:"text",placeholder:"请输入金额"},model:{value:t.formData.amount,callback:function(e){t.$set(t.formData,"amount",e)},expression:"formData.amount"}}),a("v-uni-text",{staticClass:"xh"},[t._v("*")])],1):t._e(),t.show1?a("uni-forms-item",{attrs:{label:"利润比例",name:"profit"}},[a("uni-easyinput",{attrs:{type:"text",disabled:!0,placeholder:"请输入利润比例"},model:{value:t.formData.profit,callback:function(e){t.$set(t.formData,"profit",e)},expression:"formData.profit"}}),a("v-uni-text",{staticClass:"xh"},[t._v("*")])],1):t._e(),t.show1?a("uni-forms-item",{attrs:{label:"日期"}},[a("v-uni-picker",{staticClass:"sexs",attrs:{mode:"date",value:t.date},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindDateChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.date))])],1),a("v-uni-text",{staticClass:"xh"},[t._v("*")])],1):t._e(),t.show1?a("uni-forms-item",{attrs:{label:"时间"}},[a("v-uni-picker",{staticClass:"sexs",attrs:{mode:"time",value:t.time},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindTimeChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.time))])],1),a("v-uni-text",{staticClass:"xh"},[t._v("*")])],1):t._e(),t.show1?a("uni-forms-item",{attrs:{label:"备注",name:"remark"}},[a("uni-easyinput",{attrs:{type:"text",placeholder:"请输入备注"},model:{value:t.formData.remark,callback:function(e){t.$set(t.formData,"remark",e)},expression:"formData.remark"}})],1):t._e()],1),a("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("提交")])],1)},r=[]}}]);